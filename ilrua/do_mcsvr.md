# 搭建Minecraft服务器
> 本章介绍了如何使用Miaofrp搭建Minecraft服务器。同时，您也可以类比此方法映射其他基于TCP的服务。

### 创建一个隧道

* 在侧栏选择创建隧道。
* 选择Frp服务器
选择指南
选近的，如果节点名称标注了运营商，而运营商和您家宽带运营商一致的时候，也不失为一个好选择。
重要的：墙外用户不要选墙内的，墙内用户不要选墙外的


* 选择隧道类型

我们必须选择TCP映射。因为Minecraft JAVA的通信协议基于TCP

* 填写本地地址

如果你的MC服务器与执行内网穿透的机器是同一个，本地IP填写localhost即可，如果不是的话，填写其对应的内网地址即可（获取内网地址方法不再叙述）。


* 填写本地端口

一般的，Minecraft服务器使用25565作为默认端口。
您可以打开 `server.properties` 文件找到变量 `server-port` 的值。这就是控制服务端监听对象的值。

* 填写远程端口

一般的，填写的值要大于等于1024，小于等于49151。
一般的，1-1024是系统端口，而49151-65535是动态端口段，理论上，不应把常用服务分配在这些端口上，因为这些端口并不像其他端口一样被注册登记。
您可以挑选你喜欢的端口。如果出现了端口被占用的情况，说明您的好点子早被前人想到了，换一个端口。
你也可以点击 `随机端口` 按钮让服务器给您提供随机端口（不会被占用）。


### 配置与启用

点击“完成创建”按钮。

在“配置文件”条目复制您的配置内容。如果您成功开通了上述专为Minecraft使用的隧道，至少要复制到如下内容（范例，不一定全部吻合，不要复制范例来作为您的配置文件。）
```
 [common] 
server_addr = 100.0.0.0
server_port = 8877
tcp_mux = true
protocol = tcp
user = TOKEN666
token = MiaoFrpToken
dns_server = 114.114.114.114

[PATH_NAME]
privilege_mode = true
type = tcp
local_ip = 127.0.0.1
local_port = 25565
remote_port = 65535
use_encryption = true
use_compression = true
```

注意:

1. 每次创建完映射或删除了映射之后配置文件都会发生变化，请在变更后及时更新您的配置文件。

2. 请勿泄露配置文件中 user 字段的内容，否则他人可以登录您的账号，截图注意打码。

3. 不过，如果真的泄露了，可以通过修改密码来解决，User 字段的内容也会随之更新。

在客户端的同级目录创建一个文本文档，命名为 frpc.ini 。
使用文本编辑器打开它
将复制的内容粘贴到里面并保存。

 **Windows客户端**
 
按照上面的方法储存好你的配置文件。
在客户端的目录里按住 Shift + 鼠标右键。
点击 “在此处打开命令提示符” 或 “在此处打开 PowerShell”。
输入命令 frpc.exe -c frpc.ini 并按下回车启动。
保持命令提示符窗口打开，不要关闭它，否则映射会中断。

此时映射已经开放了，可以运行Minecraft服务器

> Write by ilrua
> fix by cosix
